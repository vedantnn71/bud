var{href:c}=window.location,{width:v,height:E}=window.screen,{userAgent:d,doNotTrack:h}=navigator,{referrer:a}=document,l=`${v}x${E}`,u=h==="1",{currentScript:e}=document;if(!e)throw new Error("[bud] unable to get the script for bud analytics");var r=e.getAttribute("data-id"),p=e.getAttribute("data-website-name")??document.title;var x=e.getAttribute("data-endpoint")??"/api/collect";function y(){let t=new URL(e.getAttribute("src"));return`${t.protocol}//${t.host}`}var A=y(),w=A+x;if(!(typeof window<"u"&&window.document))throw new Error("[bud] stopping the execution as not currently on client side");if(u)throw new Error("[bud] not tracking as do not track is enabled");if(!r)throw new Error("[bud] missing tracker id");var b=0,s=!1,L=setInterval(()=>{s||(b+=500)},500);function g(){let t={id:r,url:c,visitTime:b,screen:l,referrer:a,userAgent:d,title:p,events:i};fetch(w,{method:"POST",body:JSON.stringify(t)})}document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&g()});var T=document.querySelectorAll("[data-event]"),i={};function k(t,o,n){t={...t,[n+"ed"]:!0},i={...i,[o]:t}}T.forEach(t=>{let o=t.getAttribute("data-event-name"),n=t.getAttribute("data-event"),m={};!o||!n||t.addEventListener(n,()=>k(m,o,n))});window.addEventListener("blur",async()=>{s=!0});window.addEventListener("focus",async()=>{s=!1});window.addEventListener("beforeunload",async()=>{clearInterval(L)});var f="";window.addEventListener("popstate",function(){f!==window.location.href&&g(),f=window.location.href});
