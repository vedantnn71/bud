var{href:s}=window.location,{width:v,height:E}=window.screen,{userAgent:c,doNotTrack:m}=navigator,{title:d,referrer:a}=document,l=`${v}x${E}`,u=m==="1",{currentScript:o}=document;if(!o)throw new Error("[bud] unable to get the script for bud analytics");var h=o.getAttribute("data-endpoint")??"/api/collect";function y(){let t=new URL(o.getAttribute("src"));return`${t.protocol}//${t.host}`}var L=y(),f=L+h;if(!(typeof window<"u"&&window.document))throw new Error("[bud] stopping the execution as not currently on client side");if(u)throw new Error("[bud] not tracking as do not track is enabled");var w=0,i=!1,x=setInterval(()=>{i||(w+=500)},500);function b(){let t={url:s,visitTime:w,screen:l,referrer:a,userAgent:c,title:d,events:r};fetch(f,{method:"POST",body:JSON.stringify(t)})}document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&b()});var A=document.querySelectorAll("[data-event]"),r={};function T(t,n,e){t={...t,[e+"ed"]:!0},r={...r,[n]:t}}A.forEach(t=>{let n=t.getAttribute("data-event-name"),e=t.getAttribute("data-event"),g={};!n||!e||t.addEventListener(e,()=>T(g,n,e))});window.addEventListener("blur",async()=>{i=!0});window.addEventListener("focus",async()=>{i=!1});window.addEventListener("beforeunload",async()=>{clearInterval(x)});var p="";window.addEventListener("popstate",function(){p!==window.location.href&&b(),p=window.location.href});
